# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π

## –®–∞–≥–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

### 1. –ü–æ–ª—É—á–∏—Ç–µ –≤–∞—à Telegram ID
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞:
```bash
docker logs freighthub-telegram-bot-1 | grep "telegram_id"
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞ [@userinfobot](https://t.me/userinfobot) - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É `/start` –∏ –æ–Ω –ø–æ–∫–∞–∂–µ—Ç –≤–∞—à ID.

### 2. –û–±–Ω–æ–≤–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `webapp/admin_api.py` –∏ –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É 12:
```python
ADMIN_IDS = [966377899]  # –°–ø–∏—Å–æ–∫ telegram_id –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
```

–ó–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –≤–∞—à telegram_id:
```python
ADMIN_IDS = [–í–ê–®_TELEGRAM_ID]  # –ù–∞–ø—Ä–∏–º–µ—Ä: [123456789]
```

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
```python
ADMIN_IDS = [123456789, 987654321]
```

### 3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞:

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions):**
```bash
git add webapp/admin_api.py
git commit -m "–û–±–Ω–æ–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤"
git push
```
GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

**–õ–æ–∫–∞–ª—å–Ω–æ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ webapp –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose restart webapp
```

### 4. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram Mini App —á–µ—Ä–µ–∑ –±–æ—Ç–∞
2. –í –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ Mini App –¥–æ–±–∞–≤—å—Ç–µ `/admin` –≤ –∫–æ–Ω–µ—Ü URL
3. –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞–ø—Ä—è–º—É—é: `https://freighthub.ihorxshdy.ru/admin?telegram_id=–í–ê–®_TELEGRAM_ID`

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

### –í–∫–ª–∞–¥–∫–∞ "–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏"
- ‚ûï **–°–æ–∑–¥–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é** - –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
- ‚úèÔ∏è **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å** - –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
- üî¥/üü¢ **–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–º
- üóëÔ∏è **–£–¥–∞–ª–∏—Ç—å** - —É–¥–∞–ª–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é (–±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã!)
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–¥–æ–≤

### –í–∫–ª–∞–¥–∫–∞ "–ò–Ω–≤–∞–π—Ç-–∫–æ–¥—ã"
- üîç **–§–∏–ª—å—Ç—Ä** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–¥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- ‚ûï **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥—ã**:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 1-100 –∫–æ–¥–æ–≤
  - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 7, 30, 90 –¥–Ω–µ–π –∏–ª–∏ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- üìã **–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å** - —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- üìä **–°—Ç–∞—Ç—É—Å—ã –∫–æ–¥–æ–≤**:
  - ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–π - –∫–æ–¥ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
  - üî¥ –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π - –∫–æ–¥ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
  - ‚úîÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω - –∫–æ–¥ —É–∂–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  - ‚è∞ –ò—Å—Ç—ë–∫ - —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–∫–æ–Ω—á–∏–ª—Å—è

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∞—à ID –≤ —Å–ø–∏—Å–∫–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
curl -X GET "http://localhost:5000/api/admin/organizations?telegram_id=–í–ê–®_TELEGRAM_ID"
```

–ï—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ JSON —Å–æ —Å–ø–∏—Å–∫–æ–º –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π.
–ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å telegram_id –≤ ADMIN_IDS.

### –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
–ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:
1. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é"
2. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è")
3. –î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å"

### –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–æ–≤
1. –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –≤ —Å–ø–∏—Å–∫–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ò–Ω–≤–∞–π—Ç-–∫–æ–¥—ã"
3. –í—ã–±–µ—Ä–∏—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
4. –ù–∞–∂–º–∏—Ç–µ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥—ã"
5. –£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 5) –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤

### –¢–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –∫–æ–¥–æ–º
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Telegram –∞–∫–∫–∞—É–Ω—Ç –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π (–Ω–µ –∞–¥–º–∏–Ω—Å–∫–∏–π)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É FreightHub
3. –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª
4. –í–≤–µ–¥–∏—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–≤–∞–π—Ç-–∫–æ–¥
5. –ó–∞–≤–µ—Ä—à–∏—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏, —á—Ç–æ –∫–æ–¥ –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω"

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:**
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ telegram_id –≤ –ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è production:
  ```python
  import os
  ADMIN_IDS = [int(x) for x in os.getenv('ADMIN_TELEGRAM_IDS', '966377899').split(',')]
  ```
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏ –∏ –∫–æ–¥–∞–º–∏
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
```sql
sqlite3 telegram-bot/database/delivery.db "SELECT * FROM organizations WHERE is_active = 1;"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤
```sql
sqlite3 telegram-bot/database/delivery.db "SELECT o.name, COUNT(*) as unused_codes FROM invite_codes ic JOIN organizations o ON ic.organization_id = o.id WHERE ic.used_by_telegram_id IS NULL AND ic.is_active = 1 GROUP BY o.id;"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º
```sql
sqlite3 telegram-bot/database/delivery.db "SELECT o.name, COUNT(*) as users FROM users u JOIN organizations o ON u.organization_id = o.id GROUP BY o.id;"
```

## Troubleshooting

### "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω" –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å telegram_id –≤ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à ID –¥–æ–±–∞–≤–ª–µ–Ω –≤ ADMIN_IDS
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ webapp –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è ADMIN_IDS

### –ö–æ–¥—ã –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ webapp: `docker logs freighthub-webapp-1`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –∫–æ–¥–æ–º
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫–æ–¥–∞ –Ω–µ –∏—Å—Ç—ë–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞: `docker logs freighthub-telegram-bot-1`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ webapp API

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ORGANIZATIONS_SETUP.md](./ORGANIZATIONS_SETUP.md) - –ø–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [README.md](./README.md) - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ
- [DEPLOY.md](./DEPLOY.md) - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
